#!/bin/bash

source ".env"
docker build . -t ${DOCKER_TAG_VERSION} -t ${DOCKER_TAG_LATEST}
docker run \
-p 8080:${DOCKER_PORT} \
	-e PORT=${DOCKER_PORT} \
  -e ENVIRONMENT="${ENVIRONMENT}" \
  -e DEFAULT_API_VERSION="${DEFAULT_API_VERSION}" \
	-e DATABASE_HOST="${DATABASE_HOST}" \
	-e DATABASE_NAME="${DATABASE_NAME}" \
	-e DATABASE_USER="${DATABASE_USER}" \
	-e DATABASE_PASSWORD="${DATABASE_PASSWORD}" \
	-e DATABASE_SOCKET=${DATABASE_SOCKET} \
	-e DATABASE_SESSION_STORE_IN_DB=${DATABASE_SESSION_STORE_IN_DB} \
	-e DATABASE_SESSION_EXPIRES=${DATABASE_SESSION_EXPIRES} \
	-e SESSION_ENABLED=${SESSION_ENABLED} \
	-e SESSION_SAVE_HANDLER="${SESSION_SAVE_HANDLER}" \
	-e SESSION_SAVE_PATH="${SESSION_SAVE_PATH}" \
	${DOCKER_APP}